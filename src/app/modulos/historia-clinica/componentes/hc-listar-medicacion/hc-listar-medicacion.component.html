<app-hc-crear-detalle-medicacion (notificarNuevoRegistro)="cargarDatos($event)"></app-hc-crear-detalle-medicacion>

<div class="grid mt-4 p-6">

    <!-- <div class="h-1/5 bg-white mb-2 grid grid-cols-2 gap-4">
        <div class="grid sm:grid-cols-4 gap-4 p-2">
            <button mat-raised-button color="primary" routerLink="/paciente/crear">
                <mat-icon>add_circle</mat-icon> Nuevo
            </button>
        </div>
    </div> -->

    
    <div class="grid grid-cols-3 gap-4">
        <div>
            <h2 style="padding: 0; margin: 0; "><b>Historial de medicación</b></h2>
            <hr>
            <div class="mat-elevation-z8 mt-4">
                <div class="_load_main inset-0" *ngIf="cargando">
                    <div class="_load_content">
                        <mat-spinner diameter=70 color=primary></mat-spinner>
                        <h3 class="_load_text">{{mensajeCarga}}</h3>
                    </div>
                </div>
                
                <table mat-table [dataSource]="dataSource" class="sm:w-full">
        
                    <ng-container matColumnDef="fecha_registro">
                        <th mat-header-cell *matHeaderCellDef class="fs-6 text-center align-middle bg-primary bg-gradient text-white"><b>FECHA DE REGISTRO</b></th>
                        <td mat-cell *matCellDef="let element"> {{element.fechaRegistro | date:'dd-MM-yyyy hh:mm:ss'}} </td>
                    </ng-container>

                    <ng-container matColumnDef="personal_medico">
                        <th mat-header-cell *matHeaderCellDef class="fs-6 text-center align-middle bg-primary bg-gradient text-white"><b>MÉDICO</b></th>
                        <td mat-cell *matCellDef="let element"> {{getNombrePersonalMedico(element)}} </td>
                    </ng-container>
                
                    <tr mat-header-row *matHeaderRowDef="columnas"></tr>
                    <tr class="cursor-pointer" mat-row *matRowDef="let row; columns: columnas;"
                        (click)="mostrarDatos(row)"></tr>
                </table>
        
                <mat-paginator [ngClass]="{'d-none': !dataSource.length}" [length]="totalFilas"
                    [pageSizeOptions]="[10, 20, 50]" [pageSize]="10" (page)="cargarDatos(null)"></mat-paginator>
            </div>
        </div>
        
        <div class="col-span-2">
            <h2 style="padding: 0; margin: 0; "><b>Detalle de la medicación</b></h2>
            <hr>
            <div class="mat-elevation-z8 mt-4">
    
                <table mat-table [dataSource]="dataSourceDetalle" class="sm:w-full">
        
                    <ng-container matColumnDef="medicamento">
                        <th mat-header-cell *matHeaderCellDef class="fs-6 text-center align-middle bg-secondary bg-gradient text-white"><b>MEDICAMENTO</b></th>
                        <td mat-cell *matCellDef="let element"> {{element.medicamento.nombre}} </td>
                    </ng-container>
    
                    <ng-container matColumnDef="indicaciones">
                        <th mat-header-cell *matHeaderCellDef class="fs-6 text-center align-middle bg-secondary bg-gradient text-white"><b>INDICACIONES</b></th>
                        <td mat-cell *matCellDef="let element"> {{element.indicaciones}} </td>
                    </ng-container>
    
                    <ng-container matColumnDef="dosis">
                        <th mat-header-cell *matHeaderCellDef class="fs-6 text-center align-middle bg-secondary bg-gradient text-white"><b>DOSIS</b></th>
                        <td mat-cell *matCellDef="let element"> {{element.dosis}} </td>
                    </ng-container>
    
                    <ng-container matColumnDef="duracion">
                        <th mat-header-cell *matHeaderCellDef class="fs-6 text-center align-middle bg-secondary bg-gradient text-white"><b>DURACIÓN</b></th>
                        <td mat-cell *matCellDef="let element"> {{element.duracion}} </td>
                    </ng-container>
    
                    <ng-container matColumnDef="frecuencia">
                        <th mat-header-cell *matHeaderCellDef class="fs-6 text-center align-middle bg-secondary bg-gradient text-white"><b>RANGO DE HORAS</b></th>
                        <td mat-cell *matCellDef="let element"> {{element.frecuencia}} </td>
                    </ng-container>
    
                    <ng-container matColumnDef="via">
                        <th mat-header-cell *matHeaderCellDef class="fs-6 text-center align-middle bg-secondary bg-gradient text-white"><b>VIA</b></th>
                        <td mat-cell *matCellDef="let element"> {{element.via}} </td>
                    </ng-container>
                
                    <tr mat-header-row *matHeaderRowDef="columnasDetalle"></tr>
                    <tr mat-row *matRowDef="let row; columns: columnasDetalle;"></tr>
                </table>
        
            </div>
        </div>
        

    </div>
    


</div>
